"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("coreUtils/core/ajaxLibrary",["lodash"],function(e){function t(e){if("function"!=typeof e)throw"ajaxMethod must be a function";n=e}var n=function(){throw"must register ajax function: zepto $.ajax for clientSide, or request() for serverSide"};return{register:t,ajax:function(t){return t.asForm?t.contentType="application/x-www-form-urlencoded":"POST"===t.type&&"json"===t.dataType&&e.isObject(t.data)&&!t.asForm&&e.assign(t,{data:JSON.stringify(t.data),contentType:t.contentType||"application/json; charset=utf-8",processData:!1}),n(t)},get:function(e,t,r,a){if("object"===(void 0===e?"undefined":_typeof(e)))return n(e);var i={url:e};return t&&(i.data=t),r&&(i.success=r),a&&(i.dataType=a),n(i)}}}),define("coreUtils/core/domMeasurements",["zepto","lodash"],function(e,t){function n(e){var t=window.getComputedStyle(e);return{top:parseFloat(t.getPropertyValue("border-top-width"),10),left:parseFloat(t.getPropertyValue("border-left-width"),10)}}function r(e,t){for(var r=e.offsetTop,a=e.offsetLeft,i=e.offsetWidth,o=e.offsetHeight,s={top:0,left:0};e.offsetParent&&(e=e.offsetParent,s=n(e),r+=s.top,a+=s.left,!t||e!==t);)r+=e.offsetTop,a+=e.offsetLeft;return{top:r,left:a,width:i,height:o,bottom:r+o,right:a+i}}function a(e,t,n){n=n||"undefined"!=typeof window&&window;var a=r(e,t);if(n){var i=n.pageYOffset||n.scrollTop||0,o=n.pageXOffset||n.scrollLeft||0;a.top-=i,a.bottom-=i,a.left-=o,a.right-=o}return a}function i(n,a,o,s){return s=s||r(n,a),o=o||e(n).children("div"),t.forEach(o,function(t){var n=r(t,a);n.width>0&&n.height>0&&(n.left<s.left&&(s.left=n.left),n.right>s.right&&(s.right=n.right),n.top<s.top&&(s.top=n.top),n.bottom>s.bottom&&(s.bottom=n.bottom));var o=e(t),l=o.children("div");l.length&&"hidden"!==o.css("overflow")&&i(t,a,l,s)}),s.width=s.right-s.left,s.height=s.bottom-s.top,s}function o(e,t,n){n=n||"undefined"!=typeof window&&window;var r=i(e,t);if(n){var a=n.pageYOffset||n.scrollTop||0,o=n.pageXOffset||n.scrollLeft||0;r.top-=a,r.bottom-=a,r.left-=o,r.right-=o}return r}return{getElementRect:r,getBoundingRect:a,getContentRect:i,getBoundingContentRect:o}}),define("coreUtils/core/imageAnalyzer",["lodash"],function(e){function t(){e.forEach(p,function(e){this[e]={}}.bind(this))}function n(e){for(var t=0,n=e.length/4,r=0;r<e.length;r+=4){var a=e[r]/255,i=e[r+1]/255,o=e[r+2]/255;t+=100*Math.max(a,i,o)/n}return t}function r(e){var t=n(e.data);postMessage(JSON.stringify(t))}function a(){return String(n)+("onmessage = "+String(r)+";")}function i(e,t,n){var r=new window.Image;r.crossOrigin="Anonymous",r.onload=function(){t(r)},r.onerror=n,r.src=e}function o(e,t){var n=window.document.createElement("canvas").getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,t.width,t.height).data}function s(t,n,r){window.Worker||r("Browser does not support Web Workers");var i=new window.Blob([a()]),o=window.URL.createObjectURL(i),s=new window.Worker(o);s.onmessage=function(t){s.terminate();var a=JSON.parse(t.data);e.isFinite(a)?n(a):r()},s.onerror=r,s.postMessage(t)}function l(e,t,n,r){i(e,function(a){h.setReqStatus(p.BRIGHTNESS,e,f.PENDING),s(o(a,t),n,r)},r)}function u(){var e=window.document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}function c(t){var n=h.getResultErrorCallbacks(p.BRIGHTNESS,t);h.remove(p.BRIGHTNESS,t),e.forEach(n,function(e){e()})}function g(t,n){var r=h.getResultSuccessCallbacks(p.BRIGHTNESS,t);h.setReqStatus(p.BRIGHTNESS,t,f.COMPLETE),h.setReqResult(p.BRIGHTNESS,t,n),e.forEach(r,function(e){e(n)}),h.clearResultCallbacks(p.BRIGHTNESS,t)}function d(t,n,r,a){switch(a=a||e.noop,r=r||e.noop,u()||a("HTML5 <canvas> is not supported in this browser"),h.getReqStatus(p.BRIGHTNESS,t)){case f.COMPLETE:r(h.getReqResult(p.BRIGHTNESS,t));break;case null:h.setReqStatus(p.BRIGHTNESS,t,f.INIT),h.registerCallbacksForResult(p.BRIGHTNESS,t,r,a),l(t,n,e.partial(g,t),e.partial(c,t));break;default:h.registerCallbacksForResult(p.BRIGHTNESS,t,r,a)}}var p={BRIGHTNESS:"brightness"},f={INIT:"init",PENDING:"pending",COMPLETE:"complete"};t.prototype={getReqResult:function(e,t){var n=this[e][t];return n&&n.status===f.COMPLETE?n.result:null},setReqResult:function(e,t,n){this[e][t]=this[e][t]||{},this[e][t].result=n},getReqStatus:function(e,t){var n=this[e][t];return n&&n.status||null},setReqStatus:function(e,t,n){this[e][t]=this[e][t]||{},this[e][t].status=n},remove:function(e,t){delete this[e][t]},registerCallbacksForResult:function(e,t,n,r){this[e][t]=this[e][t]||{};var a=this[e][t];a.callbacks=a.callbacks||{onSuccess:[],onError:[]},a.callbacks.onSuccess.push(n),a.callbacks.onError.push(r)},clearResultCallbacks:function(e,t){delete this[e][t].callbacks},getResultSuccessCallbacks:function(e,t){var n=this[e][t];return n&&n.callbacks&&n.callbacks.onSuccess||[]},getResultErrorCallbacks:function(e,t){var n=this[e][t];return n&&n.callbacks&&n.callbacks.onError||[]}};var h=new t;return{getImageMeanBrightness:d}}),define("coreUtils/core/imageUtils",["lodash","imageClientApi","coreUtils/core/imageAnalyzer"],function(e,t,n){function r(t,n){var r=e.get(t,"query",{}),a=e(r).keys().find(function(t){return e.includes(["devicepixelratio"],t.toLowerCase())});return Number(r[a])||n||1}function a(n,a,i,o,s){if(!n.containerWidth||!n.containerHeight||!n.imageData.uri)return{uri:"",css:{}};var l=n.imageData,u=n.displayMode||t.fittingTypes.SCALE_TO_FILL,c=e.defaults(n.quality||{},l.quality);o=r(i,o);var g=e.assign(e.pick(l,["width","height","crop"]),{id:l.uri}),d={width:n.containerWidth,height:n.containerHeight,htmlTag:s||"img",pixelAspectRatio:o,alignment:n.alignType||t.alignTypes.CENTER},p=t.getData(u,g,d,c);return p.uri=a(p.uri),(l.itemProp||n.addItemProp)&&(p.itemProp=l.itemProp||"image"),e.has(n,"labelledById")&&(p["aria-labelledby"]=n.labelledById),e.has(n,"describedById")&&(p["aria-describedby"]=n.describedById),p}function i(n,r,a){var i,s,l=r.width/r.height,u=a===t.fittingTypes.LEGACY_FIT_WIDTH,c=a===t.fittingTypes.LEGACY_FIT_HEIGHT;return u?(s=n.width/l,i=o(n.width,s)):i=c?o(n.height*l,n.height):e.clone(n),i}function o(e,t){return{width:Math.ceil(e),exactWidth:e,height:Math.ceil(t),exactHeight:t}}return{getContainerSize:i,getImageComputedProperties:a,getImageMeanBrightness:n.getImageMeanBrightness,alignTypes:t.alignTypes,fittingTypes:t.fittingTypes}}),define("coreUtils/core/languages",[],function(){return["de","en","es","fr","it","ja","ko","pl","ru","nl","tr","sv","pt","no","da","hi","zh","cs","th"]}),define("coreUtils/core/SiteDataPrivates",["lodash"],function(e){function t(){this.name="_privates_"+n,n++}if("undefined"!=typeof WeakMap)return WeakMap;var n=0;return t.prototype.set=function(e,t){e[this.name]=t},t.prototype.get=function(e){return e[this.name]},t.prototype.delete=function(e){delete e[this.name]},t.prototype.has=function(t){return e.has(t,this.name)},t}),define("coreUtils/core/pathValidationUtil",["lodash","coreUtils/core/SiteDataPrivates"],function(e,t){function n(t,n,r){if(!e.isArray(t))throw new Error("path type is not an array - "+t);if(!a(n,t,r))throw new Error("path does not exist - "+t);return!0}function r(t,n,r){if(!n)return!1;var a=o(t,n,n.length);return!e.isUndefined(a)&&(!r||r(a))}function a(t,n,r){if(!n||!e.isArray(n))return!1;var a=n[n.length-1],i=o(t,n,r?n.length:n.length-1);return!e.isUndefined(i)&&(!!r||s(a,i))}function i(t,n,r){for(var a=t,i=0;i<n&&(a=a[r[i]],!e.isUndefined(a));i++);return a}function o(t,n,r){var a=e.take(n,r);if(n&&"pagesData"===n[0]&&!e.isEmpty(t.pagesDataRaw))return 0===a.length?t.pagesDataRaw:e.get(t.pagesDataRaw,a);var o=c.get(t);return e.get(o,"mobxDataHandlers.getObservableByPath")?o.mobxDataHandlers.getObservableByPath(t,a):i(t,r,n)}function s(t,n){return e.isNumber(t)?e.isArray(n):!!e.isString(t)&&l(n)}function l(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(t,n){var r=c.get(t);c.set(t,e.assign(r,{mobxDataHandlers:n}))}var c=new t;return{setMobxDataHandlers:u,validatePath:n,validatePathExist:a,validatePathExistsAndCorrect:r}}),define("coreUtils/dal/DisplayedJsonDal",["lodash","coreUtilsLib","coreUtils/core/pathValidationUtil"],function(e,t,n){function r(e,t,r){return n.validatePathExist(e,t,r)}function a(t,n){var r=[].concat(n),a=r.pop(),i=e.get(t,r,t);e.isArray(i)?i.splice(a,1):delete i[a]}function i(t,n){var r=this.getByPath(t),a=e.assign({},r,n);this.setByPath(t,a)}function o(e,t,n,r){0===e?t.unshift(n):t.splice(e,0,n),this.setByPath(r,t)}function s(t,n){var r=e.get(t,n);if(!e.isPlainObject(r))throw new Error("Can not get keys of an element that isn't a plain object");return e.keys(r)}var l=t.objectUtils.cloneDeep,u=function(e,t,n){this.pointersCache=t,this.jsonData=e,this.jsonData.pagesDataRaw={},this.mobxDataHandlers=n||{}};return u.prototype={get:function(e,t){var n=this.pointersCache.getPath(e);return this.getByPath(n,t)},getByPath:function(t,n){if(t)return this.mobxDataHandlers.getByPath?this.mobxDataHandlers.getByPath(this.jsonData,t,n):l(e.get(this.jsonData,t))},set:function(e,t){var n=this.pointersCache.getPath(e,!0);this.setByPath(n,t)},setByPath:function(t,n){if(!e.isArray(t))throw new Error("path type is not an array - "+t);this.mobxDataHandlers.setByPath?this.mobxDataHandlers.setByPath(this.jsonData,t,n):e.set(this.jsonData,t,l(n)),this.pointersCache.resetValidations()},isExist:function(e){return!!this.pointersCache.getPath(e)},isPathExist:function(e){return this.mobxDataHandlers.getObservableByPath&&this.mobxDataHandlers.getObservableByPath(this.jsonData,e),r(this.jsonData,e,!0)},merge:function(e,t){if(this.isExist(e)){var n=this.pointersCache.getPath(e);this.mergeByPath(n,t)}},mergeByPath:function(t,n){if(r(this.jsonData,t,!0)&&e.isPlainObject(n))this.mobxDataHandlers.mergeByPath?this.mobxDataHandlers.mergeByPath(this.jsonData,t,n):i.call(this,t,n),this.pointersCache.resetValidations();else if(!e.isPlainObject(n))throw new Error(n+" is not an object")},push:function(t,n,r,a){if(!this.isExist(t))throw new Error(JSON.stringify(t)+" path does not exist");var i=this.pointersCache.getPath(t);if(!e.isUndefined(a)&&!e.isNumber(a))throw new Error("push index arguments should be a number");if(this.pushByPath(i,n,a),r){var o=i.concat(a);this.pointersCache.setPath(r,o)}},pushByPath:function(t,n,r){var a;if(a=this.mobxDataHandlers.getObservableByPath?this.mobxDataHandlers.getObservableByPath(this.jsonData,t):this.getByPath(t),(r=e.isNumber(r)?r:a.length)>a.length||r<0)throw new Error("Index out of bound");this.mobxDataHandlers.pushByPath?this.mobxDataHandlers.pushByPath(this.jsonData,r,a,n,t):o.call(this,r,a,n,t),this.pointersCache.resetValidations()},remove:function(e){var t=this.pointersCache.getPath(e);if(!t)throw new Error(e+" pointer does not exist");this.removeByPath(t)},removeByPath:function(e){if(!e)throw new Error("path is not valid");this.mobxDataHandlers.removeByPath?this.mobxDataHandlers.removeByPath(this.jsonData,e):a(this.jsonData,e),this.pointersCache.resetValidations()},getKeys:function(e,t){var n=this.pointersCache.getPath(e);if(n)return this.getKeysByPath(n,t)},getKeysByPath:function(e,t){return n.validatePath(e,this.jsonData),this.mobxDataHandlers.getKeysByPath?this.mobxDataHandlers.getKeysByPath(this.jsonData,e,t):s(this.jsonData,e)},getStructureProperty:function(t){var n=this.pointersCache.getPath(t,!0);return e.has(this.jsonData.pagesDataRaw,n)||e.get(this.jsonData,e.slice(n,0,3),{}).isStructureNode||this.setByPath(n,void 0),this.getByPath(n)}},u}),define("coreUtils/core/displayedOnlyStructureUtil",["lodash"],function(e){function t(e,t){return e+l+t}function n(e,n,r){var a=e.id;r(a,t(a,n))}function r(a,i,o){o=o||e.noop;var s=a.components,l=e.map(s,function(e){return r(e,i,o)}),c=t(a.id,i),g=e.reduce(u,function(e,n){return a[n]&&(e[n]=t(a[n],i)),e},{id:c});return n(a,i,o),e.defaults(g,s&&{components:l},a)}function a(t){var n=t.components,r=e.map(n,function(e){return a(e)}),i=e.reduce(u,function(e,n){return t[n]&&(e[n]=s(t[n])),e},{});return t.id&&(i.id=s(t.id)),e.defaults(i,n&&{components:r},t)}function i(e){return!!o(e)}function o(e){if(e)return e.split(l)[1]}function s(e){if(e)return e.split(l)[0]}var l="__",u=["dataQuery","designQuery"];return{getUniqueStructure:r,getOriginalStructure:a,isDisplayedComponent:i,getItemId:o,generateUniqueItemId:t,getOriginalId:s}}),define("coreUtils/core/SessionFreezer",["lodash"],function(e){function t(e){r.push(e)}function n(){e.forEach(r,Object.freeze)}var r=[];return{freeze:t,start:n}}),define("coreUtils/pointers/pointerGeneratorsRegistry",["coreUtils/core/SessionFreezer"],function(e){var t={},n={},r={},a={};return e.freeze(t),e.freeze(n),e.freeze(r),e.freeze(a),{registerDataAccessPointersGenerator:function(e,a,i){i?n[e]=a:t[e]=a,r[e]=a},registerPointerType:function(e,t,n,r,i,o){a[e]={findItemFunction:t,identityCheckFunction:n,isUsingDifferentNameSpaceForFull:r,isExistInFullJson:i,supportDisplayedOnlySplit:o}},getRegularJsonGenerators:function(){return t},getBothRegularAndFullJsonGenerators:function(){return n},getAllTypes:function(){return a}}}),define("coreUtils/pointers/pointersCache",["lodash","coreUtils/core/pathValidationUtil","coreUtils/core/displayedOnlyStructureUtil","coreUtils/pointers/pointerGeneratorsRegistry","multilingual","experiment"],function(e,t,n,r,a,i){function o(t,n){var r=t;return e.forEach(n,function(t){if(e.isUndefined(r))return!1;r=r[t]}),r}function s(e,t){if(!e)return!t;if(!t||t.length!==e.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function l(t,n,a,s){this.initMyState(),this.json=n,this.fullJson=a,this.siteData=t;var l=e.get(s,"getItemInPath",o);this.getItemInPath=l.bind(null,n),this.fullJsonGetItemInPath=l.bind(null,a),this.validated={},this.pointersMap={},this.hasMultilingualExperiment=i.isOpen("sv_multilingual",this.siteData);var u=r.getAllTypes();e.forOwn(u,function(e,t){this.cache[t]={},this.itemFinders[t]=e.findItemFunction,this.identityCheckers[t]=e.identityCheckFunction,this.identityCheckersCache[t]={},e.isUsingDifferentNameSpaceForFull&&(this.fullJsonCache[t]={}),e.isExistInFullJson&&(this.typesExistingInFullJson[t]=!0),this.supportDisplayedOnlySplit[t]=e.supportDisplayedOnlySplit}.bind(this))}function u(e,n,r,a,i){var o=this.validated[e]||p;if(a)return o||(t.validatePathExist(i,r,!1)?f:p);if(o!==h){var s=n.id,l=this.identityCheckersCache[n.type],u=l[s];u||(u=this.identityCheckers[n.type].bind(this,s),l[s]=u),o=t.validatePathExistsAndCorrect(i,r,u)?h:p}return o}function c(e,t,n,r){var a=null,i=this.itemFinders[e.type];return i&&(a=i(this.siteData.getAllPossiblyRenderedRoots(),r,e),t[e.id]=a||n),a}function g(e,t){var n=t?"|":",";return e.id+n+e.type}function d(n,r,i){var o=n&&this.fullJsonCache.hasOwnProperty(r.type),s=o?this.fullJsonCache:this.cache,l=n&&this.typesExistingInFullJson.hasOwnProperty(r.type),d=l?this.fullJson:this.json,f=l?this.fullJsonGetItemInPath:this.getItemInPath,m=s[r.type];if(!m)return null;var P=m[r.id],v=i&&e.isEmpty(r.innerPath),y=g(r,o),I=u.call(this,y,r,P,v,d,o);if(I===p&&(I=(P=v?null:c.call(this,r,m,P,f))?h:this.validated[y]||p),this.validated[y]=I,P&&r.innerPath&&(P=P.concat(r.innerPath),!t.validatePathExist(d,P,!i)))return null;if(this.hasMultilingualExperiment&&e.has(r,"multilingual")&&e.includes(P,"pagesData")){var U=a.getTranslationPath(P,e.indexOf(P,"data")),D=r.multilingual===a.PointerOperation.GET;if(t.validatePathExist(d,P,!0)&&t.validatePathExist(d,U,D))return U}return P}var p=0,f=1,h=2;return l.prototype={initMyState:function(){this.cache={general:{}},this.fullJsonCache={},this.itemFinders={general:function(){return null}},this.identityCheckers={general:function(){return!0}},this.identityCheckersCache={},this.typesExistingInFullJson={},this.supportDisplayedOnlySplit={}},getBoundCacheInstance:function(e){return{getAllPointers:this.getAllPointers.bind(this),registerDisplayedOnlyComponent:this.registerDisplayedOnlyComponent.bind(this),getPath:this.getPath.bind(this,e),getPointer:this.getPointer.bind(this,e),setPath:this.setPath.bind(this,e),resolveId:this.resolveId.bind(this,e),resetValidations:this.resetValidations.bind(this)}},setPath:function(e,t,n){n&&(e?this.fullJsonCache[t.type][this.resolveId(e,t.id,t.type)]=n:this.cache[t.type][this.resolveId(e,t.id,t.type)]=n)},getPath:function(t,n,r){var a={type:n.type,id:this.resolveId(t,n.id,n.type)};return n.hasOwnProperty("innerPath")&&(a.innerPath=n.innerPath),this.hasMultilingualExperiment&&e.has(n,"multilingual")&&(a.multilingual=n.multilingual),d.call(this,t,a,!!r)},getPointer:function(e,t,n,r,a){var i=e&&this.fullJsonCache[n],o=i?this.fullJsonCache[n]:this.cache[n],l={type:n,id:t};return r&&(s(o[t],r)||(this.validated[g(l,i)]=p,o[t]=r)),o[t]?(a&&(l.component=a),l):null},getAllPointers:function(t){var n=this.resolveId(!0,t.id,t.type),r=e.get(this.pointersMap,n);if(!r)return[t];var a=e(r).map(function(e){return{id:e,path:this.getPath(!1,{id:e,type:t.type})}}.bind(this)).filter("path").map(function(e){var n=this.getPointer(!1,e.id,t.type,e.path);return t.innerPath&&t.innerPath.length&&(n.innerPath=t.innerPath),n}.bind(this)).value();return n===t.id&&e.isEmpty(a)?(delete this.pointersMap[n],[t]):a},registerDisplayedOnlyComponent:function(t,n){var r=e.get(this.pointersMap,t,{});r[n]=n,this.pointersMap[t]=r},resolveId:function(e,t,r){return e&&this.supportDisplayedOnlySplit[r]&&n.getOriginalId(t)||t},resetValidations:function(){this.validated={}}},l}),define("coreUtils/pointers/DataAccessPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry"],function(e,t){function n(n,r,a){var i=t.getRegularJsonGenerators();e.forEach(i,function(t,i){n[i]=e.mapValues(t,function(e){return e.bind(t,r.getItemInPath,a)})})}function r(n,r){var a=t.getBothRegularAndFullJsonGenerators();e.forEach(a,function(t,a){n[a]=e.mapValues(t,function(e){return r(e,!1,t)}),n.full[a]=e.mapValues(t,function(e){return r(e,!0,t)})})}function a(t){this.full={};var a=t.getBoundCacheInstance(!1),i=t.getBoundCacheInstance(!0),o=function(n,r,o){return function(){var s=e.toArray(arguments),l=[t.getItemInPath,a].concat(s),u=[t.fullJsonGetItemInPath,i].concat(s),c=n.apply(o,l),g=n.apply(o,u);return r?g:c}};n(this,t,a),r(this,o)}function i(e){e&&a.call(this,e)}function o(t){if(t)return e(t).pick("type","id","fullId").omit(e.isUndefined).value()}return i.prototype={getGeneralTheme:function(){},getInnerPointer:function(t,n){var r=o(t);if(r){var a=e.isString(n)?n.split("."):n;r.innerPath=t.innerPath?t.innerPath.concat(a):a}return r},isSamePointer:function(e,t){return e&&t&&e.type===t.type&&e.id===t.id},getInnerPointerPathRoot:function(e){return e.innerPath?e.innerPath[0]:null},getOriginalPointerFromInner:o,getPointerType:function(t){switch(t.type){case"DESKTOP":case"MOBILE":return e.isEmpty(t.innerPath)?"component":"componentStructure";default:return t.type}}},i}),define("coreUtils/dal/DALFactory",["lodash","coreUtils/core/SiteDataPrivates","coreUtils/dal/DisplayedJsonDal","coreUtils/pointers/pointersCache","coreUtils/pointers/DataAccessPointers"],function(e,t,n,r,a){function i(t,n){var a=c.get(t);if(a&&a.pointersCache)return a.pointersCache;var i=l(t,n||e.pick(t,"pagesData")),o=new r(t,t,i,e.get(a,"mobxDataHandlers"));return c.set(t,e.assign(c.get(t),{pointersCache:o})),o}function o(e,t){var n=i(e,t);return new a(n)}function s(t,r){var a=c.get(t);if(a&&a.displayedJsonDal)return a.displayedJsonDal;var o=i(t,r),s=new n(t,o.getBoundCacheInstance(!1),e.get(a,"mobxDataHandlers"));return c.set(t,e.assign(c.get(t),{displayedJsonDal:s})),s}function l(t,n){var r=c.get(t);return r&&r.fullJson?r.fullJson:(c.set(t,e.assign(c.get(t),{fullJson:n})),n)}function u(t,n){var r=c.get(t);c.set(t,e.assign(r,{mobxDataHandlers:n}))}var c=new t;return{setMobxDataHandlers:u,getInstance:s,getCacheInstance:i,getPointersInstance:o,getFullPagesData:l}}),define("coreUtils/dal/siteDataUtils",["lodash","coreUtils/dal/DALFactory"],function(e,t){function n(e,n,r){var a=t.getInstance(e),i=["dynamicPages","routersRendererIndex"],o=n.pageId,s=e.isPopupPage(o),l={},u={};if(r&&(s||(l.primaryPage=null),l.popupPage=null),u[o]=n,e.isDynamicPage(o)){var c=a.getByPath(i);u[o].routersRendererIndex=n.pageAdditionalData+c,a.setByPath([i],c+1)}s?l.popupPage=n.pageId:(u[e.MASTER_PAGE_ID]=n,l.primaryPage=n.pageId),a.mergeByPath(["_currentRootInfos"],u),a.mergeByPath(["_currentPageIds"],l)}function r(e,n){return t.getInstance(e).getByPath(["_browserFlags",n])}function a(e,n){return t.getInstance(e).getByPath(["svgShapes",n])}function i(e){return"editor"===t.getInstance(e).getByPath(["renderFlags","componentViewMode"])}function o(e){return t.getInstance(e).getByPath(["renderFlags","isWixAdsAllowed"])}function s(e,n,r){return t.getInstance(e).setByPath(["svgShapes",n],r)}function l(e){var n=t.getInstance(e);return e.resolvedDataMaps&&n.isPathExist(["resolvedDataMaps","masterPage"]),n.isPathExist(["pagesData","masterPage","structure","mobileComponents"])}function u(t,n){if(!t.isPathExist(["wixappsRenderCounters"])){var r=e.set({},n,{});return void t.setByPath(["wixappsRenderCounters"],r)}t.isPathExist(["wixappsRenderCounters",n])||t.setByPath(["wixappsRenderCounters",n],{})}function c(e,n,r){r=r||"general";var a=t.getInstance(e),i=["wixappsRenderCounters",n,r];a.isPathExist(i)||(u(a,n),a.setByPath(i,0));var o=a.getByPath(i);a.setByPath(i,o+1)}function g(e){return t.getInstance(e).getByPath(["mapFromPageUriSeoToPageId"])}function d(e,n){var r=t.getInstance(e);return n?r.getByPath(["requestModel",n]):r.getByPath(["requestModel"])}function p(e,n,r){t.getInstance(e).setByPath(["customUrlMapping",n],r)}function f(n,r){var a=t.getInstance(n),i=n.getScreenSize();e.isEqual(i,r)||a.mergeByPath(["screenSize"],r)}function h(e,n){var r=t.getInstance(e);return n?r.getByPath(["rendererModel",n]):r.getByPath(["rendererModel"])}function m(n){var r=t.getInstance(n),a=["pagesData","masterPage","data","document_data"],i=r.getKeysByPath(a);return e.filter(i,function(e){var t=r.getByPath(a.concat([e,"type"]));return"Page"===t||"AppPage"===t})}return{incrementWixappsRenderCounter:c,setRootNavigationInfo:n,isMobileStructureExists:l,getBrowserFlag:r,setSvgShape:s,getSvgShape:a,isEditingMode:i,isWixAdsAllowed:o,getMapFromPageUriSeoToPageId:g,getRequestModel:d,getRendererModel:h,setCustomUrlMapping:p,getAllPageIds:m,updateScreenSize:f}}),define("coreUtils/core/wixUserApi",["lodash","coreUtils/core/languages","coreUtilsLib","coreUtils/dal/siteDataUtils","experiment"],function(e,t,n,r,a){function i(e){var t=l.parseCookieString(e)[c];if(t){var n=t.split("|");return{userName:n[0],email:n[1],mailStatus:n[2],permissions:n[3],isSessionNew:n[4],isSessionValid:n[5],userID:n[6]}}return null}function o(e){return l.parseCookieString(e)[u]}function s(){return"undefined"==typeof window||void 0===window.navigator?null:a.isOpen("sv_browserLangFix")?(window.navigator.languages?window.navigator.languages[0]:null)||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage:window.navigator.language||window.navigator.browserLanguage}var l=n.cookieUtils,u="wixLanguage",c="wixClient";return{getUsername:function(e){var t=i(r.getRequestModel(e,"cookie"));return t?t.userName:null},getLanguage:function(n,r,a){var i=o(n||""),l=r.query&&r.query.lang||function(){var e=r.host.split(".");return 2===e[0].length?e[0]:null}()||i||s()||a;return l&&(l=l.substring(0,2).toLowerCase()),e.includes(t,l)?l:"en"},isSessionValid:function(e){return!!i(e)},logout:function(e){var t=window.document?window.document.location.host:"";t=t.substring(t.indexOf(".")+1),l.deleteCookie(c,t),"undefined"!=typeof document&&(e.requestModel.cookie=window.document.cookie)},getLanguages:function(){return t}}}),define("coreUtils/wixUrlParser/utils/urlParserUtils",["lodash","coreUtilsLib","coreUtils/dal/siteDataUtils"],function(e,t,n){function r(r){if(r.isResolvedSiteData)return r;var a=r.getCurrentUrlPageId(),i=e.keyBy(r.getPagesDataItems(),"id");i.masterPage=r.getDataByQuery("masterPage");var o={primaryPageId:r.getPrimaryPageId(),urlFormat:r.getUrlFormat(),mainPageId:r.getMainPageId(),externalBaseUrl:r.getExternalBaseUrl(),unicodeExternalBaseUrl:r.getUnicodeExternalBaseUrl(),publicBaseUrl:r.getPublicBaseUrl(),currentUrl:r.currentUrl,currentUrlPageId:a,isFeedbackEndpoint:r.isFeedbackEndpoint(),isSiteHistoryEndpoint:r.isSiteHistoryEndpoint(),isViewerMode:r.isViewerMode(),isWixSite:r.isWixSite(),languageCode:r.getLanguageCode(),isTemplate:r.isTemplate(),isUsingSlashUrlFormat:r.isUsingUrlFormat(t.siteConstants.URL_FORMATS.SLASH),isPremiumDomain:r.isPremiumDomain(),allPageIds:r.getAllPageIds(),routersConfigMap:e.get(r,"routers.configMap"),cookie:n.getRequestModel(r,"cookie"),rendererModel:{runningExperiments:n.getRendererModel(r,"runningExperiments")},serviceTopology:{basePublicUrl:r.getServiceTopologyProperty("basePublicUrl"),baseDomain:r.getServiceTopologyProperty("baseDomain"),staticDocsUrl:r.getServiceTopologyProperty("staticDocsUrl")},pagesDataItemsMap:i,isPermalink:r.isPermalink,mapFromPageUriSeoToPageId:n.getMapFromPageUriSeoToPageId(r),pageResponseForUrl:r.pageResponseForUrl,rootNavigationInfo:r.getRootNavigationInfo()};return o.isResolvedSiteData=!0,o}return{getResolvedSiteData:r}}),define("coreUtils/core/routerUtils",["lodash"],function(e){function t(t,n){return e.some(t,function(t){return e.includes(e.values(t.pages),n)})}return{isDynamicPage:t}}),define("coreUtils/wixUrlParser/parsers/slashUrlParser",["lodash","coreUtilsLib","coreUtils/wixUrlParser/utils/urlParserUtils","coreUtils/dal/siteDataUtils","coreUtils/core/routerUtils"],function(e,t,n,r,a){function i(n){var r=t.urlUtils.parseUrl(n.externalBaseUrl).host;return e.endsWith(r,"."+t.siteConstants.FREE_DOMAIN.WIXSITE)||e.endsWith(r,"."+n.serviceTopology.baseDomain)}function o(e){return e.isPremiumDomain&&!i(e)}function s(n){var r=e.isObject(n.currentUrl)?n.currentUrl.full:t.urlUtils.parseUrl(n.currentUrl).full;return n.isTemplate&&e.startsWith(r,n.serviceTopology.basePublicUrl)}function l(e){return"object"===("undefined"==typeof window?"undefined":_typeof(window))&&window.karmaIntegration?L.BEAKER:e.isFeedbackEndpoint?L.REVIEW:e.isSiteHistoryEndpoint?L.SITE_HISTORY:e.isViewerMode?o(e)?L.PREMIUM:e.isWixSite||s(e)?L.WIX_INTERNAL:L.FREE_SITE:L.PREVIEW}function u(t){return e.map(t,encodeURIComponent)}function c(t){return e.map(t,decodeURIComponent)}function g(t,n){var r=e.find(t.pagesDataItemsMap,{pageUriSEO:n});return r&&r.id}function d(n,i){var o=r.getMapFromPageUriSeoToPageId(n),s=e.get(o,i)||g(n,i)||t.errorPages.IDS.NOT_FOUND;return a.isDynamicPage(n.routersConfigMap,s)&&(s=t.errorPages.IDS.NOT_FOUND),s}function p(n,r){var a=t.urlUtils.parseUrl(n.externalBaseUrl).path.replace(/\/$/,"").split("/").length;return r?e.drop(r.split("/"),a):[]}function f(e){return e===N}function h(e,t){var n=e.pagesDataItemsMap[t];return n&&"Page"===n.type&&n.tpaApplicationId>0}function m(e,t){var n=e.pagesDataItemsMap[t];return n&&"AppPage"===n.type&&"AppBuilderPage"===n.appPageType}function P(e,t){var n=e.pagesDataItemsMap[t];return n&&"AppPage"===n.type&&"AppPage"===n.appPageType&&n.appPageId===x}function v(e,t){var n=e.pagesDataItemsMap[t];return n&&"AppPage"===n.type&&"AppPage"===n.appPageType&&n.appPageId===B}function y(e,t){return v(e,t)||P(e,t)}function I(e){return e&&e.replace(/^https?:\/\//,"")}function U(e,n){var r=I(t.urlUtils.getBaseUrlWithPath(n,l(e)));return t.urlUtils.isSame(r,I(e.externalBaseUrl))||t.urlUtils.isSame(r,I(e.unicodeExternalBaseUrl))||t.urlUtils.isHostnameYandexWebvisor(r)||/^s3\.amazonaws\.com\/wix\-/.test(r)}function D(t,n){if(n)return e.find(t.routersConfigMap,{prefix:n})}function S(e){var n=e.query.q,r=/\:([^\:]+)\+$/.exec(n);return r&&r[1]&&t.urlUtils.parseUrl(r[1])||e}function E(n,r){var a=e.isObject(r)?r:t.urlUtils.parseUrl(r);if(a.hostname===k&&(a=S(a)),!U(n,a))return null;var i=p(n,a.path),o=e.head(i),s=e.drop(i,1),l={format:t.siteConstants.URL_FORMATS.SLASH},u=D(n,o);if(u&&(l.routerDefinition=u,l.pageAdditionalData=o+"/"+s.join("/")),l.routerDefinition){l.innerRoute=s.join("/");var g=n.pageResponseForUrl;g&&g.pageId&&(l.pageId=g.pageId,l.title=g.title)}else o?f(o)?(l.pageItemId=e.head(s),l.pageId=n.currentUrlPageId||n.mainPageId):(l.pageId=d(n,o),m(n,l.pageId)?l.title=i[2]:l.title=o):(l.pageId=n.mainPageId,l.title=C(n,l.pageId));a.query[M]&&(l.pageItemId=a.query[M],l.imageZoom=!0);var P=e.omit(a.query,_);return a.query&&!e.isEmpty(P)&&(l.queryParams=P),i.length>1&&!l.routerDefinition&&(m(n,l.pageId)?l.pageAdditionalData=e.head(s):f(o)?l.pageAdditionalData=e.drop(s,1).join("/"):h(n,l.pageId)?l.tpaInnerRoute=c(s).join("/"):l.pageAdditionalData=s.join("/")),l}function C(n,r){var a=n.pagesDataItemsMap[r];return e.get(a,"pageUriSEO")||t.siteConstants.DEFAULT_PAGE_URI_SEO}function A(t){return e.omit(t.currentUrl.query,_)}function b(t){var n=e.get(t,"rootNavigationInfo.pageAdditionalData");if(n){var r=n.split("/");return e.drop(r,1).join("/")}}function R(n,r,a,i,o,s){var l=A(n),c=e.assign({},l,r.queryParams||{}),g=o||n.externalBaseUrl;g=g.replace(/\/$/,"");var d=n.isPermalink(r.pageItemId);if(r.routerId||r.routerDefinition?("CURRENT_INNER_ROUTE"===r.innerRoute&&(r.innerRoute=b(n)||r.innerRoute),g+="/"+(r.routerId?e.get(n.routersConfigMap,r.routerId+".prefix"):r.routerDefinition.prefix),r.innerRoute&&"/"!==r.innerRoute&&(g+="/"+r.innerRoute)):r.pageId&&!d&&(r.pageId!==n.mainPageId||a||r.pageAdditionalData||r.tpaInnerRoute)&&(g+="/"+C(n,r.pageId)),m(n,r.pageId)&&r.pageAdditionalData)g+="/"+r.pageAdditionalData+(r.title?"/"+r.title:"");else if(h(n,r.pageId)&&r.tpaInnerRoute)g+="/"+u(r.tpaInnerRoute.split("/")).join("/");else if(y(n,r.pageId)&&r.pageAdditionalData){var p=s&&s.getCustomUrlMapping?s.getCustomUrlMapping():void 0,f=e.findKey(p,{id:r.pageAdditionalData});g+=f?"/"+f:"/"+r.pageAdditionalData}return r.pageItemId&&(d?r.pageAdditionalData&&(g+="/"+N+"/"+r.pageItemId+"/"+r.pageAdditionalData):r.imageZoom&&(c[M]=r.pageItemId)),i||e.isEmpty(c)||n.currentUrl.hostname===k||(g+="?"+t.urlUtils.toQueryString(c)),g}function T(e,t){return E(n.getResolvedSiteData(e),t)}function w(e,t,r,a,i,o,s){return R(n.getResolvedSiteData(e),t,r,a,i,s)}function O(e,r){var a=t.urlUtils.parseUrl(r);return U(n.getResolvedSiteData(e),a)}var M="lightbox",_=[M],x="7326bfbb-4b10-4a8e-84c1-73f776051e10",B="79f391eb-7dfc-4adf-be6e-64434c4838d9",N="_p",L={PREVIEW:7,SITE_HISTORY:8,WIX_INTERNAL:2,FREE_SITE:1,PREMIUM:0,REVIEW:3,BEAKER:3},k="webcache.googleusercontent.com";return{parseUrl:T,getUrl:w,isUrlToCurrentSite:O}}),define("coreUtils/log/log",["lodash","coreUtilsLib"],function(e,t){var n=console.log.bind(console),r=console.warn.bind(console),a=console.error.bind(console),i="undefined"==typeof window||"all"===t.urlUtils.parseUrl(e.get(window,["location","href"],"")).query.debug,o=i?n:e.noop;return{warnVerbose:i?r:e.noop,verbose:o,info:n,warn:r,error:a,warnDeprecation:function(e){i&&console.error("DocumentServices|Deprecated|"+e)}}}),define("coreUtils/wixUrlParser/parsers/hashBangUrlParser",["coreUtilsLib","lodash","coreUtils/wixUrlParser/utils/urlParserUtils","coreUtils/log/log"],function(e,t,n,r){function a(t){var n;return"string"==typeof t?n=e.urlUtils.parseUrl(t):t.full?n=t:r.error("url to parse has to be either a string or an object"),n}function i(e,n){return t.includes(e.allPageIds,n)}function o(e,t){var n={},r=e.match(/#!(.*?)\/zoom[\/\|](.+?)\/([^\/]+)$/i);if(!r){var a=e.match(/#!(.*?)[\/\|]([^\/]+)\/?(.*$)/i);if(a){var o=a[1],s=a[2],l=a[3];return o&&(n.title=o),i(t,s)?n.pageId=s:(n.pageId=t.primaryPageId||t.mainPageId,n.pageItemId=s),l&&(n.tpaInnerRoute=l,n.pageAdditionalData=l),n}return{pageId:t.mainPageId}}return r[1]&&(n.title=r[1]),n.pageId=r[2],n.pageItemId=r[3],n.imageZoom=!0,n}function s(n,r,a,i){var o=n.currentUrl,s=i||n.externalBaseUrl;s=s.replace("."+e.siteConstants.FREE_DOMAIN.WIXSITE+"/","."+e.siteConstants.FREE_DOMAIN.WIX+"/");var l=o.query;return a||t.isEmpty(l)||(s+="?"+e.urlUtils.toQueryString(l)),o.url=s,r.id&&(s+="#!"+r.title+"/"+r.id),r.additionalData&&(s+="/"+r.additionalData),s}function l(e,n){if(!n)return null;var r=a("#"===n?e.currentUrl:n),i="localhost"===r.hostname;return u(e,r)&&!i?e.currentUrl.full!==r.full||t.includes(r.full,"#")?null:{pageId:e.mainPageId}:(t.isString(n)&&0===n.indexOf("#!")&&((r=t.clone(e.currentUrl)).hash=n),o(r.hash,e))}function u(t,n){return!(e.urlUtils.isHostnameYandexWebvisor(n.hostname)||d(t,n))}function c(e,t){var n=e.pagesDataItemsMap[t];return n&&"AppPage"===n.type&&"AppPage"===n.appPageType&&n.appPageId===P}function g(e){return e&&e.replace(/^https?:\/\//,"")}function d(t,n){var r=n.hostname+n.path;return e.urlUtils.isSame(r,g(t.externalBaseUrl))||e.urlUtils.isSame(r,g(t.unicodeExternalBaseUrl))}function p(t,n,r,a,i,o){var l={title:n.title||e.siteConstants.DEFAULT_PAGE_URI_SEO};if(n.pageItemId&&!n.pageAdditionalData&&n.imageZoom?(l.id="zoom",l.additionalData=n.pageId+"/"+n.pageItemId):(n.pageId!==t.mainPageId||n.pageAdditionalData||n.tpaInnerRoute||r)&&(l.id=n.pageItemId||n.pageId,l.additionalData=n.tpaInnerRoute||n.pageAdditionalData),c(t,n.pageId)&&o){var u=n.pageAdditionalData||"",g=o[u]||o[decodeURIComponent(u)]||{};l.id=n.pageId,l.title=g.title,l.additionalData=g.id}return s(t,l,a,i)}function f(e,t){return l(n.getResolvedSiteData(e),t)}function h(e,t,r,a,i,o){return p(n.getResolvedSiteData(e),t,r,a,i,o)}function m(t,r){if("#"===r)return!0;var a=e.urlUtils.parseUrl(r);return d(n.getResolvedSiteData(t),a)}var P="7326bfbb-4b10-4a8e-84c1-73f776051e10";return{parseUrl:f,getUrl:h,isUrlToCurrentSite:m}}),define("coreUtils/wixUrlParser/wixUrlParser",["lodash","coreUtilsLib","coreUtils/wixUrlParser/parsers/slashUrlParser","coreUtils/wixUrlParser/parsers/hashBangUrlParser","coreUtils/wixUrlParser/utils/urlParserUtils"],function(e,t,n,r,a){function i(n,r){var a=e.isObject(r)?r:t.urlUtils.parseUrl(r);return!t.stringUtils.startsWith(a.hash,"#!")&&n.isUsingSlashUrlFormat}function o(e,t){return d[t||e.urlFormat]||d[e.urlFormat]}function s(e,t){return t===e.replace(/\/$/,"")+"/app"}function l(e,t){var o=a.getResolvedSiteData(e);return!t||s(o.externalBaseUrl,t)?null:"#"===t?l(o,o.currentUrl.full):i(o,t)?n.parseUrl(o,t):r.parseUrl(o,t)}function u(e,t,n,r,i,s){var l=a.getResolvedSiteData(e);return o(l,t.format).getUrl(l,t,n,r,i,s,e)}function c(e,t){var o=a.getResolvedSiteData(e);return i(o,t)?n.isUrlToCurrentSite(o,t):r.isUrlToCurrentSite(o,t)}function g(e,t){if(c(e,t)){var n=e.currentUrl.protocol;return t.replace(/^https?:/,n)}return t}var d={slash:n,hashBang:r};return{getUrl:u,parseUrl:l,utils:a,normalizeProtocolForSameSite:g}}),define("coreUtils/core/linkUtils",["lodash","coreUtilsLib","coreUtils/wixUrlParser/wixUrlParser"],function(e,t,n){function r(e){var t="mailto:"+(e.recipient&&e.recipient.trim()||""),n=[];return e.subject&&n.push("subject="+e.subject),e.body&&n.push("body="+e.body),n.length>0&&(t+="?"+n.join("&")),t}function a(n,r){var a,i=n.docId,o=/\.pdf$/i.test(i),s=r.serviceTopology.staticDocsUrl;return e.includes(i,"ugd/")&&e.includes(s,"/ugd")&&(i=i.substr(i.indexOf("ugd")+4)),a=s+"/"+i,o?!0===n.indexable&&(a+="?index=true"):a+="?"+t.urlUtils.toQueryString({dn:n.name}),a}function i(e){return"tel:"+e.phoneNumber}function o(t){var n={};return t.link&&(n=e.pick(t.link,g[t.link.type]),e.isObject(n.pageId)&&(n.pageId="#"+n.pageId.id),e.isObject(n.anchorDataId)&&(n.anchorDataId="#"+n.anchorDataId.id)),n}function s(t,n,o){if(n)switch(n.type){case"PageLink":n.pageId?u(t,n.pageId.replace("#",""),t.getSiteData().getAllPageIds(),!1,void 0,e.noop,o):o&&o({error:{message:"missing pageId property for PageLink"}});break;case"AnchorLink":l(t,n,o);break;case"ExternalLink":break;case"EmailLink":window.location.href=r(n);break;case"PhoneLink":window.location.href=i(n);break;case"DocumentLink":var s=a(n,t.getSiteData());window.open(s,"_self");break;case"DynamicPageLink":c(t,n,n.anchorDataId)}}function l(t,n,r){if(n.pageId){var a=n.pageId.replace("#","");t.getSiteData().getPrimaryPageId()===a||t.getSiteData().MASTER_PAGE_ID===a?t.scrollToAnchor(n.anchorDataId):u(t,a,t.getSiteData().getAllPageIds(),!1,n.anchorDataId,e.noop,r)}else r&&r({error:{message:"missing pageId property for AnchorLink"}})}function u(t,n,r,a,i,o,s){if(e.includes(r,n)){t.getSiteAspect("actionsAspect").registerNavigationComplete(o);var l={pageId:n};a&&(l.transition="none"),i&&(l.anchorData=i),t.navigateToPage(l)}else s&&s({error:{message:'Page id "'+n+'" was not found.'}})}function c(e,t,r){var a=n.getUrl(e.getSiteData(),t),i=n.parseUrl(e.getSiteData(),a);r&&(i.anchorData=r),e.navigateToPage(i,!1,!1)}var g={PageLink:["type","pageId"],AnchorLink:["type","anchorName","anchorDataId","pageId"],ExternalLink:["type","target","url"],EmailLink:["type","recipient","subject"],PhoneLink:["type","phoneNumber"],DocumentLink:["type","docId","name"],DynamicPageLink:["type","routerId","innerRoute","anchorDataId"]};return{getEmailLink:r,getDocumentLink:a,getPhoneLink:i,navigateToLink:s,navigateToPage:u,getRelevantLinkDataFromMenuItem:o}}),define("coreUtils/core/linkRenderer",["lodash","coreUtilsLib","coreUtils/core/linkUtils","coreUtils/core/wixUserApi","coreUtils/wixUrlParser/wixUrlParser"],function(e,t,n,r,a){function i(e,n){var r="/"===n.url?e.publicBaseUrl:n.url;return t.validationUtils.isValidUrl(r)?(r=a.normalizeProtocolForSameSite(e,r),{href:r,target:n.target||D,"data-content":r,"data-type":"external"}):{}}function o(t,n,r){var i=n.pageId;if(!i)return{};var o=r||{pageId:i.id,title:i.pageUriSEO};n.queryParams&&e.assign(o,{queryParams:n.queryParams});var s=a.getUrl(t,o),l={href:s,target:U};return h(t,i.id)&&e.assign(l,{href:E,"data-no-physical-url":s}),l}function s(t,n){if(!n.routerId)return{};var r={routerId:n.routerId,innerRoute:n.innerRoute};n.queryParams&&e.assign(r,{queryParams:n.queryParams});var i={href:a.getUrl(t,r),target:U};return n.anchorDataId&&(i["data-anchor"]=n.anchorDataId),i}function l(e,t){return o(e,t)}function u(n,r,a){var i,s="masterPage"===r.pageId.id,u=e.clone(r),c=e.has(r.anchorDataId,"id")?r.anchorDataId.id:r.anchorDataId,g=e.includes(t.siteConstants.SAME_PAGE_SCROLL_ANCHORS,c)||s,d=a.imageZoom,p=h(n,a.pageId);return i=g?d||p?o(n,{pageId:n.pagesDataItemsMap[n.primaryPageId]}):o(n,u,a):l(n,u),p||(i["data-keep-roots"]=!0),i["data-anchor"]=c,i}function c(e){return{href:n.getPhoneLink(e),"data-content":e.phoneNumber,"data-type":"phone"}}function g(e){return{href:n.getEmailLink(e),target:U,"data-content":e.recipient,"data-type":"mail"}}function d(e,t){return{href:n.getDocumentLink(t,e),target:D,"data-type":"document"}}function p(n,a){var i,o,s,l=a.postLoginUrl||"",u=a.postSignupUrl||"",c=a.dialog||"showLogin",g="";return e.includes(u,"ifcontext")&&(s=t.urlUtils.parseUrl(u).query,e.forOwn(s,function(e,t){"ifcontext"===t.toLowerCase()&&(g=e.replace("#",""),u=/^[a-zA-Z0-9]+$/.test(g)?u.replace("{ifcontext}",g):u.replace("{ifcontext}","illegalContextValue"))})),r.isSessionValid(n.cookie)?o=l:("createUser"===c&&(c="sign-up"),i={originUrl:n.currentUrl.full,postLogin:l,postSignUp:u,view:c,overrideLocale:n.languageCode},e.forEach(C,function(t,n){var r=a[t];e.isUndefined(r)||""===r||(i[n]=r)}),o=S+t.urlUtils.toQueryString(i)),{href:o,target:U}}function f(e,t){return{href:e.currentUrl.full,target:"_self","data-mobile":t.dataMobile}}function h(e,t){var n=e.pagesDataItemsMap[t];return n&&n.isPopup}function m(e){return!!e&&0===e.indexOf("mailto")}function P(e,t){if(!t)return!1;var n=a.utils.getResolvedSiteData(e),r=!!a.parseUrl(n,t),i=0===t.indexOf(n.serviceTopology.staticDocsUrl),o=t===E;return!(r||m(t)||i||o)}function v(e){return"PageLink"===e.type&&!e.pageId||"AnchorLink"===e.type&&!e.pageId||"AnchorLink"===e.type&&!e.anchorDataId||"DocumentLink"===e.type&&!e.docId||"DynamicPageLink"===e.type&&!e.routerId}function y(e){return!!e&&"/"===e.charAt(0)}function I(e,t,n){var r=[];return e&&r.push("galleryId:"+e),t&&r.push("propertyQuery:"+t),n&&r.push("galleryCompId:"+n),r.join(" ")}var U="_self",D="_blank",S="https://users.wix.com/signin?",E="javascript:void()",C={sendEmail:"sendMail",welcomeEmailTemplate:"mailTemplate",userColor:"userColor",loginCompName:"loginCompName",referralInfo:"loginCompName"};return{renderLink:function(e,t,n){if(!e||v(e)||!n)return{};var r=a.utils.getResolvedSiteData(t);switch(e.type){case"PageLink":return l(r,e);case"ExternalLink":return i(r,e);case"AnchorLink":return u(r,e,n);case"LoginToWixLink":return p(r,e);case"EmailLink":return g(e);case"PhoneLink":return c(e);case"DocumentLink":return d(r,e);case"SwitchMobileViewMode":return f(r,e);case"DynamicPageLink":return s(r,e);default:return{}}},renderImageZoomLink:function(t,n,r,i,o,s){var l,u,c=e.defaults({pageItemId:r.id,title:r.title,imageZoom:!0},n),g=a.utils.getResolvedSiteData(t);u={href:l=a.getUrl(g,c),target:U},h(g,c.pageId)&&(u.href=E,u["data-no-physical-url"]=l);var d=I(i,o,s);return d&&(u["data-page-item-context"]=d),u},renderPageLink:function(e,t){return l(a.utils.getResolvedSiteData(t),{pageId:e})},isExternalLink:P,isRelativeUrl:y,isEmailLink:m,getLinkUrlFromLinkProps:function(e){return e.href===E?e["data-no-physical-url"]:e.href},CONSTS:{LOGIN_TO_WIX_URL:S}}}),define("coreUtils/core/scrollAnchorsUtils",["lodash","coreUtilsLib"],function(e,t){function n(e){var t=parseInt(e,10);return isNaN(t)?0:t}function r(e){return n(e.height.WIX_ADStop)+n(e.top.WIX_ADStop)}function a(t,n){var a=0,i=n.measureMap;if(i&&t){var o=t.compId,s=e.get(i,"custom.SITE_HEADER.isFixedPosition"),l=i.top[o],u=i.absoluteTop[o],c=s?l:u,g=n.isMobileView()?r(i):0;a=e.isFinite(c)?c+g:0}return a}function i(e){if(!e.measureMap)return 1/0;var t=e.measureMap,n=t.height.WIX_ADSbottom||0,a=r(t),i=t.height.masterPage+n+a+e.renderFlags.extraSiteHeight,o=t.height.screen;return Math.max(i-o,0)}function o(e,t){return Math.min(e,i(t))}function s(n,r,a){var i=a.getPageData(r,["structure"]),o=t.dataUtils.getAllCompsInStructure(i);return e.find(o,function(t){var i=t.connectionQuery,o=i&&a.getDataByQuery(i,r,a.dataTypes.CONNECTIONS);return o&&e.find(o.items,{role:n})})}function l(t,n){var r;if(!e.startsWith(t,"dataItem")&&n){var a=n.getSiteData(),i=s(t,a.getPrimaryPageId(),a);i&&(r=i.dataQuery)}return r||t}function u(e,t){var n=t.getSiteData(),r=c(l(e,t),n);return r.y=o(r.y,n),r}function c(t,r){var i=0;return t===I.PAGE_ANCHORS.TOP_ANCHOR_ID?i=D:t===I.PAGE_ANCHORS.BOTTOM_ANCHOR_ID?i=n(e.get(r.measureMap,["height","masterPage"])):t&&(i=a(r.getDataByQuery(t,r.getPrimaryPageId()),r)),{x:0,y:i,anchorQuery:t}}function g(t,n){var r=e.find(t,{id:n});return r&&r.layout}function d(t,n,r){var a=t.getPageDataMap(n,t.dataTypes.DATA);if(!a)return[];var i=e.filter(a,{type:"Anchor"});i.push(p(t.getPrimaryPageId(),r));var o=t.getPageData(n,["structure","components"]);return e.sortBy(i,function(e){var t=g(o,e.compId);return t?t.y:U})}function p(e,t){return{compId:I.PAGE_ANCHORS.TOP_ANCHOR_COMP_ID,id:I.PAGE_ANCHORS.TOP_ANCHOR_ID,name:t||"",type:"Anchor",pageId:e}}function f(t,n){n=n||[];var r=d(t,t.getPrimaryPageId()),a=e.reject(r,function(t){return e.includes(n,t.compId)});return e.size(a)?a:[r[0]]}function h(t,n){return e(n).map(function(n){var r=c(n.id,t),a=n.id;return e.assign(r,{id:a})}).sortBy("y").value()}function m(e,t,n){return{activeAnchorComp:e,index:t,total:n}}function P(t,n){if(e.every(t,{y:0}))return null;for(var r=null,a=0;a<t.length;a++){var i=t[a];if(!(n>=i.y))break;r=i}return r?m(r,a-1,t.length):null}function v(t,n,r){if(!t.measureMap)return null;var a=h(t,f(t,r)),o=P(a,n);return o&&i(t)<=n?m(e.last(a),a.length-1,a.length):o}function y(e){return e===I.PAGE_ANCHORS.BOTTOM_ANCHOR_ID||e===I.PAGE_ANCHORS.TOP_ANCHOR_ID}var I=t.siteConstants,U=-99999,D=0;return{getPageTopAnchor:p,calcAnchorScrollToPosition:u,getPageAnchors:d,getActiveAnchor:v,getAnchor:s,normalizeYOffset:o,isSpecialAnchor:y,getSortedAnchorsByY:h,SCROLL_PAGE_TOP_Y_POS:U}}),define("coreUtils/core/anchorTagsGenerator",["lodash","coreUtilsLib"],function(e,t){function n(t,n){if(!e.some(n))return t;var a=r(t);return e.forEach(a.textNodes,e.partial(s,e,n)),a.container.innerHTML}function r(e){var t=d.document.createDocumentFragment().appendChild(d.document.createElement("div"));return t.innerHTML=e,{container:t,textNodes:a(t)}}function a(e,t){if(t=t||[],i(e)&&t.push(e),o(e))return t;for(e=e.firstChild;e;)a(e,t),e=e.nextSibling;return t}function i(e){return e.nodeType===d.Node.TEXT_NODE}function o(e){return e.nodeType===d.Node.ELEMENT_NODE&&"a"===e.tagName.toLowerCase()}function s(t,n){var r=[],a=t.parentNode,i=t.data,o=p.findAll(i,n);0!==o.length&&(e(o).orderBy("index","desc").forEach(function(e){r.push(d.document.createTextNode(i.slice(e.index+e.key.length))),r.push(l(e)),i=i.slice(0,e.index)}),r.push(d.document.createTextNode(i)),e.forEach(r.reverse(),function(e){a.insertBefore(e,t)}),a.removeChild(t))}function l(t){var n=u(t),r=d.document.createElement("a");r.innerHTML=t.key,r.classList.add(n.className),e.forEach(e.omit(n,["className"]),function(e,t){r.setAttribute(t,e)});var a=d.document.createElement("object");return a.appendChild(r),a.setAttribute("height",0),a}function u(t){var n={"data-auto-recognition":"true","data-content":t.key,className:"auto-generated-link"};switch(t.pattern){case p.Pattern.PHONE:return e.assign(n,{href:"tel:"+t.value,"data-type":"phone"});case p.Pattern.MAIL:return e.assign(n,{href:"mailto:"+t.value,"data-type":"mail"});case p.Pattern.URL:return e.assign(n,{href:t.value,target:"_blank","data-type":"external"});default:throw"Unknown Pattern: "+t.pattern}}function c(t,n){if(!e.some(n))return[];var a=r(t);return e(a.textNodes).map("data").flatMap(e.partial(p.findAll,e,n)).map(u).value()}function g(e,t){var n={};return n[f.PHONE]=t,n[f.MAIL]=!0,n[f.URL]=!0,n}var d=t.fragment,p=t.textPatternRecognizer,f=t.textPatternRecognizer.Pattern;return{generateAnchorsInHtml:n,findDataForAnchors:c,getIncludedPatterns:g}}),define("coreUtils/pointers/aspectsPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry"],function(e,t){var n=["siteAspectsData"];t.registerPointerType("siteAspects",e.constant(null),e.constant(!0));var r={getAspectGlobalData:function(e,t,r){return t.getPointer(r+"_globalData","siteAspects",n.concat([r,"globalData"]))},getAspectAllComponentsData:function(e,t,r){return t.getPointer(r+"_allCompsData","siteAspects",n.concat([r,"dataByCompId"]))},getAspectComponentData:function(e,t,r,a){return t.getPointer(r+"_compData_"+a,"siteAspects",n.concat([r,"dataByCompId",a]))}};t.registerDataAccessPointersGenerator("siteAspects",r)}),define("coreUtils/core/constants",[],function(){return{VIEW_MODES:{DESKTOP:"DESKTOP",MOBILE:"MOBILE"},DATA_TYPES:{data:"data",prop:"props",design:"design",theme:"style",behaviors:"behaviors",connections:"connections",mobileHints:"mobileHints"},COMP_DATA_QUERY_KEYS:{data:"dataQuery",props:"propertyQuery",design:"designQuery",behaviors:"behaviorQuery",connections:"connectionQuery",mobileHints:"mobileHintsQuery"},PAGE_DATA_DATA_TYPES:{props:"component_properties",data:"document_data",design:"design_data",behaviors:"behaviors_data",connections:"connections_data",style:"theme_data",mobileHints:"mobile_hints"},ACTION_TYPES:{CLICK:"click",DBL_CLICK:"dblClick",MOUSE_IN:"mouseenter",MOUSE_OUT:"mouseleave",CHANGE:"change",BLUR:"blur",FOCUS:"focus",IMAGE_CHANGED:"imageChanged",IMAGE_EXPANDED:"imageExpanded",ITEM_CLICKED:"itemClicked",CELL_SELECT:"cellSelect",CELL_EDIT:"cellEdit",ROW_SELECT:"rowSelect",FETCH_DATA:"fetchData",DATA_CHANGE:"dataChange",AUTOPLAY_OFF:"autoplayOff",AUTOPLAY_ON:"autoplayOn",KEY_PRESS:"keyPress",SCREEN_IN:"screenIn",VIEWPORT_ENTER:"viewportEnter",VIEWPORT_LEAVE:"viewportLeave",SCROLL:"scroll",VALIDATE:"validate",SET_CUSTOM_VALIDITY:"setCustomValidity",SYNC_VALIDATION_DATA:"syncValidationData",UPDATE_VALIDITY_INDICATION:"updateValidityIndication",MESSAGE:"message",UPLOAD_COMPLETE:"uploadComplete"},BASE_PROPS_SCHEMA_TYPE:"DefaultProperties",COMP_IDS:{PAGE_GROUP:"SITE_PAGES",PAGES_CONTAINER:"PAGES_CONTAINER",HEADER:"SITE_HEADER",FOOTER:"SITE_FOOTER",BACKGROUND:"SITE_BACKGROUND",QUICK_ACTION_BAR:"QUICK_ACTION_BAR",WIX_ADS:"WIX_ADS"},POPUP:{POPUP_OVERLAY_CONTAINER:{STYLE_ID:"strc1",SKINPART_ID:"popupOverlayContainer",COMPONENT_TYPE:"wysiwyg.viewer.components.StripContainer",SKIN:"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer",TYPE:"StripContainer"},POPUP_CONTAINER:{COMPONENT_TYPE:"wysiwyg.viewer.components.PopupContainer"}},ACTIVE_ANCHOR:{DELAY_TO_END_SCROLL:50},CURRENT_CONTEXT:"CURRENT_CONTEXT",ANCHORS:{LOCK_THRESHOLD:70,LOCK_CONDITION:{ALWAYS:"always",NEVER:"never",THRESHOLD:"threshold"}},SUPPORTED_DYNAMIC_ACTIONS:{chat:{appId:"14517e1a-3ff0-af98-408e-2bd6953c36a2",icon:"55ef598f51c14f36ba4f0690cf28626f",color:"#2D41A9",text:"Chat",itemType:"chat"}},LANDING_PAGES_COMP_IDS:{PAGES_CONTAINER:"PAGES_CONTAINER",QUICK_ACTION_BAR:"QUICK_ACTION_BAR"}}}),define("coreUtils/pointers/jsonItemsFinders",["coreUtils/core/constants"],function(e){function t(t,n){return n===e.VIEW_MODES.MOBILE?t.mobileComponents?"mobileComponents":"components":t.children?"children":"components"}function n(e,t){return t.id===e||"masterPage"===e&&t.children}function r(e,a,i,o){if(n(a,e))return o;var s=t(e,i),l=e[s];if(!l)return null;for(var u=null,c=0;c<l.length&&!u;c++)u=r(l[c],a,i,o.concat([s,c]));return u}return{getChildrenPropertyName:t,getComponentPath:function(e,t,n){return r(e,t,n,[])},getDataPath:function(){},isComponentWithId:n}}),define("coreUtils/pointers/componentPointers",["lodash","coreUtils/core/constants","coreUtils/pointers/DataAccessPointers","coreUtils/pointers/pointerGeneratorsRegistry","coreUtils/pointers/jsonItemsFinders"],function(e,t,n,r,a){function i(e){return["pagesData",e,"structure"]}function o(t){return e.isArray(t)&&"pagesData"===t[t.length-3]}function s(e,t,n){var r=e(i(n));if(r){var o=a.getComponentPath(r,t.id,t.type);return o&&(o=i(n).concat(o)),o}}function l(t,n,r){var a;if(e.forEach(t,function(e){a=a||s(n,r,e)}),!a){var i=e.keyBy(t);e.forOwn(n(["pagesData"]),function(e,t){return!!i[t]||!(a=s(n,r,t))&&void 0})}return a}var u=new n;r.registerPointerType(t.VIEW_MODES.DESKTOP,l,a.isComponentWithId,!0,!0,!0),r.registerPointerType(t.VIEW_MODES.MOBILE,l,a.isComponentWithId,!0,!0,!0);var c={getMobilePointer:function(n,r,a){return e.assign(e.clone(a),{type:t.VIEW_MODES.MOBILE})},getDesktopPointer:function(n,r,a){return e.assign(e.clone(a),{type:t.VIEW_MODES.DESKTOP})},isMobile:function(e,n,r){return r.type===t.VIEW_MODES.MOBILE},isPage:function(e,t,n){return o(t.getPath(n))},isPagesContainer:function(e,n,r){return r.id===t.COMP_IDS.PAGES_CONTAINER},isMasterPage:function(e,t,n){var r=t.getPath(n);return!!r&&("masterPage"===r[1]&&this.isPage(e,t,n))},isInMasterPage:function(e,t,n){return"masterPage"===t.getPath(n)[1]},getViewMode:function(e,n,r){return this.isMobile(e,n,r)?t.VIEW_MODES.MOBILE:t.VIEW_MODES.DESKTOP},getChildrenContainer:function(e,t,n){var r=e(t.getPath(n)),i=a.getChildrenPropertyName(r,n.type),o=u.getOriginalPointerFromInner(n);return o.innerPath=[i],o},getChildren:function(t,n,r){var i=n.getPath(r),o=t(i),s=a.getChildrenPropertyName(o,r.type),l=o[s];return e.map(l,function(e,t){return n.getPointer(e.id,r.type,i.concat([s,t]))})},getChildrenRecursively:function(e,t,n){for(var r=this.getChildren(e,t,n),a=0;a<r.length;)r.push.apply(r,this.getChildren(e,t,r[a])),a++;return r},getChildrenRecursivelyRightLeftRootIncludingRoot:function(t,n,r,a){for(var i=[r],o=[];i.length;){var s=i.shift();e.isFunction(a)&&!a(s)||o.unshift(s),i=this.getChildren(t,n,s).concat(i)}return o},getParent:function(t,n,r){var a=n.getPath(r);if(!a||o(a))return null;var i=e.dropRight(a,2),s=t(i);return s&&n.getPointer(s.id,r.type,i)},getSiblings:function(t,n,r){var a=this.getParent(t,n,r);if(!a)return[];var i=this.getChildren(t,n,a);return e.remove(i,{id:r.id}),i},getComponent:function(e,t,n,r){var i=r.type;n=t.resolveId(n,i);var o=t.getPointer(n,i);if(!o){var s=t.getPath(r),l=e(s),u=a.getComponentPath(l,n,i);u&&(o=t.getPointer(n,i,s.concat(u)))}return o},getMasterPage:function(e,t,n){return this.getPage(e,t,"masterPage",n)},getPage:function(e,t,n,r){var a=r,o=t.getPointer(n,a);if(!o){var s=i(n);if(!e(s))return null;o=t.getPointer(n,a,s)}return o},getNewPage:function(e,n,r,a){var o=a||t.VIEW_MODES.DESKTOP,s=i(r);if(e(s))throw new Error("there is already a page with id "+r);return n.getPointer(r,o,s)},getLandingPageComponents:function(n,r,a){var i=this.getMasterPage(n,r,a);return e(t.LANDING_PAGES_COMP_IDS).map(function(e){return this.getComponent(n,r,e,i)}.bind(this)).compact().value()},getPagesContainer:function(e,n,r){var a=this.getMasterPage(e,n,r);return this.getComponent(e,n,t.COMP_IDS.PAGES_CONTAINER,a)},getFooter:function(e,n,r){var a=this.getMasterPage(e,n,r);return this.getComponent(e,n,t.COMP_IDS.FOOTER,a)},getHeader:function(e,n,r){var a=this.getMasterPage(e,n,r);return this.getComponent(e,n,t.COMP_IDS.HEADER,a)},getUnattached:function(e,t,n,r){return t.getPointer(n,r,[])},getPageOfComponent:function(e,t,n){var r=t.getPath(n);if(!r)return null;var a=r[1];return this.getPage(e,t,a,n.type)},isDescendant:function(t,n,r,a){var i=n.getPath(r),o=n.getPath(a);if(i&&o){var s=o.length;return i.length>s&&e.isEqual(i.slice(0,s),o)}return!1},getAllDisplayedOnlyComponents:function(e,t,n){return t.getAllPointers(n)},registerDisplayedOnlyComponent:function(e,t,n,r){t.registerDisplayedOnlyComponent(n,r)}};r.registerDataAccessPointersGenerator("components",c,!0)}),define("coreUtils/pointers/componentStructurePointers",["lodash","coreUtils/pointers/DataAccessPointers","coreUtils/pointers/pointerGeneratorsRegistry"],function(e,t,n){var r=new t,a={getModes:function(e,t,n){return r.getInnerPointer(n,["modes"])},getModesDefinitions:function(e,t,n){return r.getInnerPointer(n,["modes","definitions"])},getModesOverrides:function(e,t,n){return r.getInnerPointer(n,["modes","overrides"])}};n.registerDataAccessPointersGenerator("componentStructure",a)}),define("coreUtils/pointers/dataPointers",["lodash","coreUtils/core/constants","coreUtils/pointers/pointerGeneratorsRegistry"],function(e,t,n){function r(){return!0}function a(t,n,r,a){var s=i(t),l=r(["pagesData"]);return e.reduce(l,function(e,n,i){var l=o(t,i,s).concat(a.id);return!e&&r(l)?l:e},null)}function i(e){var n=t.PAGE_DATA_DATA_TYPES[e];if(n)return n;throw new Error("there is no such data type "+e)}function o(e,t,n){return["pagesData",t,"data",n||i(e)]}var s=t.DATA_TYPES;e.forEach(s,function(e){n.registerPointerType(e,a.bind(null,e),r,!1,!0)});var l={getDataItem:function(e,t,n,r){return this.getItem(e,t,s.data,n,r)},getDataItemWithPredicate:function(t,n,r,a){return e.head(this.getDataItemsWithPredicate(t,n,r,a))},getDataItemsWithPredicate:function(t,n,r,a){var i=a||"masterPage",l=o(s.data,i),u=t(l);return u=u.toJS?u.toJS():u,e.map(e.filter(u,r),function(e){return this.getDataItem(t,n,e.id,i)}.bind(this))},getDesignItem:function(e,t,n,r,a){return this.getItem(e,t,s.design,n,r,a)},getPropertyItem:function(e,t,n,r,a){return this.getItem(e,t,s.prop,n,r,a)},getBehaviorsItem:function(e,t,n,r){return this.getItem(e,t,s.behaviors,n,r)},getConnectionsItem:function(e,t,n,r){return this.getItem(e,t,s.connections,n,r)},getMobileHintsItem:function(e,t,n,r){return this.getItem(e,t,s.mobileHints,n,r)},getThemeItem:function(e,t,n){return this.getItem(e,t,s.theme,n,"masterPage")},getItem:function(e,t,n,r,a,i){var s=o(n,a);return s.push(r),t.getPointer(r,n,s,i)},getDataItemFromMaster:function(e,t,n){return this.getDataItem(e,t,n,"masterPage")},getPageIdOfData:function(e,t,n){return t.getPath(n)[1]},validatePath:function(e,t,n){return!!t.getPath(n)}};n.registerDataAccessPointersGenerator("data",l)}),define("coreUtils/pointers/generalPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry"],function(e,t){var n="general";t.registerPointerType(n,e.constant(null),e.constant(!0)),t.registerPointerType("metadata",e.constant(null),e.constant(!0));var r={getAllTheme:{id:"theme",path:["pagesData","masterPage","data","theme_data"]},getOrphanPermanentDataNodes:{id:"orphanPermanentDataNodes",path:["orphanPermanentDataNodes"]},getTextRuntimeOverallBorders:{id:"overallBorders",path:["textRuntimeLayout","overallBorders"]},getDockedRuntimeLayout:{id:"dockedRuntimeLayout",path:["dockedRuntimeLayout"]},getNoEnforceAnchorsPointer:{id:"noEnforceAnchors",path:["noEnforceAnchors"]},getSaveInvalidationCount:{id:"saveInvalidationCount",path:["saveInvalidationCount"]},getPagesData:{id:"pagesData",path:["pagesData"]},getServiceTopology:{id:"serviceTopology",path:["serviceTopology"]},getCommittedMobilePages:{id:"committedMobilePages",path:["committedMobilePages"]},getDeletedPagesMapPointer:{id:"deletedPagesMap",path:["deletedPagesMap"]},getUserId:{id:"userId",path:["rendererModel","userId"]},getIsStudioUser:{id:"isStudioUser",path:["documentServicesModel","userInfo","isStudio"]},getEditorData:{id:"editorData",path:["editorData"]},getMobileStructuresPointer:{id:"mobileStructures",path:["mobileStructures"]},getCompsToUpdateAnchors:{id:"compsToUpdateAnchors",path:["compsToUpdateAnchors"]},getRuntimePointer:{id:"runtime",path:["runtime"]},getNeverSaved:{id:"neverSaved",path:["documentServicesModel","neverSaved"]},getPublicUrl:{id:"publicUrl",path:["documentServicesModel","publicUrl"]},getPermissions:{id:"permissions",path:["documentServicesModel","permissionsInfo"]},getForbiddenPageUriSEOs:{id:"forbiddenPageUriSEOs",path:["urlFormatModel","forbiddenPageUriSEOs"]},getUrlFormat:{id:"urlFormat",path:["urlFormatModel","format"]},getClientSpecMap:{id:"clientSpecMap",path:["rendererModel","clientSpecMap"]},getAutosaveInfo:{id:"autoSaveInfo",path:["documentServicesModel","autoSaveInfo"]},getSiteVersion:{id:"siteVersion",path:["documentServicesModel","version"]},getMetaSiteId:{id:"metaSiteId",path:["rendererModel","metaSiteId"]},getDocumentType:{id:"documentType",path:["rendererModel","siteInfo","documentType"]},getActiveModes:{id:"activeModes",path:["activeModes"]},getContactFormsMetaData:{id:"contactformsMetaData",path:["contactforms_metadata"]},getRootsRenderedInMobileEditor:{id:"rootsRenderedInMobileEditor",path:["rootsRenderedInMobileEditor"]},getRenderFlags:{id:"renderFlags",path:["renderFlags"]},getRoutersPointer:{id:"routers",path:["routers"]},getSantaBase:{id:"santaBase",path:["santaBase"]}};Object.freeze(r);var a={getRenderFlag:function(e,t,r){return t.getPointer("renderFlags"+r,n,["renderFlags",r])},getRenderRealtimeConfigItem:function(e,t,r){return t.getPointer("renderRealtimeConfig"+r,n,["renderRealtimeConfig",r])},getAutoSaveInnerPointer:function(e,t,r){return t.getPointer("autoSaveInfo"+r,n,["documentServicesModel","autoSaveInfo",r])},getMediaQualityItemPointer:function(e,t,r){return t.getPointer("mediaQualityStore"+r,n,["mediaQualityStore",r])},getMediaPlaybackItemPointer:function(e,t,r){return t.getPointer("mediaStore"+r,n,["mediaStore",r])},getSvgShapePointer:function(e,t,r){return t.getPointer("svgShapes"+r,n,["svgShapes",r])},getSvgBoxBoundariesPointer:function(e,t,r){return t.getPointer("shapesBoundaries"+r+"boxBoundaries",n,["shapesBoundaries",r,"boxBoundaries"])},getOnStageSvgAspectRatioPointer:function(e,t,r){return t.getPointer("vectorShapesAspect"+r,n,["vectorShapesAspect",r])}},i=e(r).mapValues(function(e){return function(t,r){return r.getPointer(e.id,n,e.path)}}).assign(a).value();Object.freeze(i),t.registerDataAccessPointersGenerator(n,i)}),define("coreUtils/pointers/platformPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry","coreUtils/pointers/DataAccessPointers"],function(e,t,n){function r(e,t){return t.getPointer("platform",g,["platform"])}function a(e,t){var n=r(e,t);return d.getInnerPointer(n,"appState")}function i(e,t,n){return t.getPointer(n+" state",g,["platform","appState",n])}function o(e,t,n){return t.getPointer("appManifest "+n,g,["platform","appManifest",n])}function s(e,t,n,r,a){return t.getPointer("controllerStageData "+n+r+a,g,["platform","appManifest",n,"controllersStageData",r,a])}function l(e,t,n){return t.getPointer(n+"_widgetState",g,["platformWidgetsState",n])}function u(e,t){return t.getPointer("pagesPlatformApplications",g,["pagesPlatformApplications"])}function c(e,t,n){return t.getPointer(n+" pages",g,["pagesPlatformApplications",n])}var g="platform",d=new n;t.registerPointerType(g,e.constant(null),e.constant(!0));var p=Object.freeze({getPlatformPointer:r,getAppStatePointer:a,getControllerStatePointer:i,getControllerStageDataPointer:s,getAppManifestPointer:o,getPlatformWidgetStatePointer:l,getPagesPlatformApplicationsPointer:u,getPagesPlatformApplicationPointer:c});t.registerDataAccessPointersGenerator(g,p)}),define("coreUtils/pointers/activeModesPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry"],function(e,t){t.registerPointerType("activeModes",e.constant(null),e.constant(!0));var n={getAllActiveModes:function(e,t){return t.getPointer("activeModes","activeModes",["activeModes"])},getPageActiveModes:function(e,t,n){return t.getPointer(n,"activeModes",["activeModes",n])}};t.registerDataAccessPointersGenerator("activeModes",n)}),define("coreUtils/pointers/pagePointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry","experiment"],function(e,t,n){t.registerPointerType("page",function(){return null},function(){return!0},!1,!0);var r={isPointerPageType:function(e,t,n){return n&&"page"===n.type},getNewPagePointer:function(e,t,n){var r=["pagesData",n];return t.getPointer(n,"page",r)},getPagePointer:function(t,n,r){var a=["pagesData",r],i=t(a);return e.isUndefined(i)?null:n.getPointer(r,"page",a)},isExists:function(t,n,r){var a=t(["pagesData",r]);return!e.isUndefined(a)},getAllPagesPointer:function(e,t){return t.getPointer("all","page",["pagesData"])},getNonDeletedPagesPointers:function(t,n,r){r=!e.isUndefined(r)&&r;var a=["pagesData"],i=t(a);return i=e.pickBy(i,function(e,t){return!!e&&!(!r&&"masterPage"===t)}),e.map(i,function(e,t){return n.getPointer(t,"page",a.concat(t))})},getPageData:function(e,t,n){var r=["pagesData",n,"data","document_data"];return e(r)?t.getPointer(n+"_data","page",r):null},getPageProperties:function(e,t,n){var r=["pagesData",n,"data","component_properties"];return e(r)?t.getPointer(n+"_prop","page",r):null},getPageDesignData:function(e,t,n){var r=["pagesData",n,"data","design_data"];return e(r)?t.getPointer(n+"_design","page",r):null},getResolvedDataMapsPointer:function(e,t){return t.getPointer("resolvedDataMaps","page",["resolvedDataMaps"])},getPageBehaviorsData:function(e,t,n){var r=["pagesData",n,"data","behaviors_data"];return e(r)?t.getPointer(n+"_design","page",r):null}};n.isOpen("sv_multilingual")&&(r.getPageTranslations=function(e,t,n){var r=["pagesData",n,"translations"];return t.getPointer(n+"_translations","page",r)}),t.registerDataAccessPointersGenerator("page",r)}),define("coreUtils/pointers/compBehavioursPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry"],function(e,t){t.registerPointerType("compBehaviours",e.constant(null),e.constant(!0));var n={getCompBehavioursMapPointer:function(e,t){return t.getPointer("compBehavioursMap","compBehaviours",["compBehavioursMap"])},getCompBehaviourPointer:function(e,t,n,r){return t.getPointer("compBehavioursMap_"+n+"_"+r,"compBehaviours",["compBehavioursMap",n,r])}};t.registerDataAccessPointersGenerator("compBehaviours",n)}),define("coreUtils/pointers/wixappsPointers",["lodash","coreUtils/pointers/pointerGeneratorsRegistry"],function(e,t){t.registerPointerType("wixapps",e.constant(null),e.constant(!0));var n={getCounterData:function(e,t,n,r){return r=r||"general",t.getPointer("wixapps_"+n+"_"+r,"wixapps",["wixappsRenderCounters",n,r])},getPackageCounterData:function(e,t,n){return t.getPointer("wixapps_"+n,"wixapps",["wixappsRenderCounters",n])}};t.registerDataAccessPointersGenerator("wixapps",n)}),define("coreUtils/pointers/pointers",["coreUtils/pointers/pointerGeneratorsRegistry","coreUtils/pointers/pointersCache","coreUtils/pointers/DataAccessPointers","coreUtils/pointers/aspectsPointers","coreUtils/pointers/componentPointers","coreUtils/pointers/componentStructurePointers","coreUtils/pointers/dataPointers","coreUtils/pointers/generalPointers","coreUtils/pointers/platformPointers","coreUtils/pointers/activeModesPointers","coreUtils/pointers/pagePointers","coreUtils/pointers/compBehavioursPointers","coreUtils/pointers/wixappsPointers"],function(e,t,n){return{pointerGeneratorsRegistry:e,PointersCache:t,DataAccessPointers:n}}),define("coreUtils/components/componentUtils",["lodash"],function(e){function t(t,n){return e.includes(t,n)||"masterPage"===n}return{shouldBeRendered:t}}),define("coreUtils/core/renderUtils",["lodash"],function(e){function t(t,n,r){var a=r?e.bind(n,r):n,i=e.keys(t).sort(),o=e.reduce(i,function(e,n){return e[n]=t[n],e},{});return e.map(o,a)}return{mapInAlphabeticalOrder:t}}),define("coreUtils",["lodash","coreUtils/core/ajaxLibrary","coreUtils/core/domMeasurements","coreUtils/core/imageUtils","coreUtils/core/wixUserApi","coreUtils/core/languages","coreUtils/core/linkRenderer","coreUtils/core/linkUtils","coreUtils/core/scrollAnchorsUtils","coreUtils/core/anchorTagsGenerator","coreUtils/dal/DisplayedJsonDal","coreUtils/core/displayedOnlyStructureUtil","coreUtils/pointers/pointers","coreUtils/core/constants","coreUtils/core/SiteDataPrivates","coreUtils/dal/siteDataUtils","coreUtils/dal/DALFactory","coreUtils/core/SessionFreezer","coreUtils/core/routerUtils","coreUtils/core/pathValidationUtil","coreUtils/log/log","coreUtils/wixUrlParser/wixUrlParser","coreUtils/components/componentUtils","coreUtilsLib","coreUtils/core/renderUtils"],function(e,t,n,r,a,i,o,s,l,u,c,g,d,p,f,h,m,P,v,y,I,U,D,S,E){return{displayedOnlyStructureUtil:g,renderDoneMixin:S.renderDoneMixin,htmlTransformer:S.htmlTransformer,textSecurityFixer:S.textSecurityFixer,htmlParser:S.htmlParser,throttleUtils:S.throttleUtils,keyboardUtils:S.keyboardUtils,classNames:S.classNames,cookieUtils:S.cookieUtils,tween:S.tween,urlUtils:S.urlUtils,Store:S.StoreNew,mobileViewportFixer:S.mobileViewportFixer,dataUtils:S.dataUtils,dateTimeUtils:S.dateTimeUtils,validationUtils:S.validationUtils,ajaxLibrary:t,cssUtils:S.cssUtils,hashUtils:S.hashUtils,guidUtils:S.guidUtils,arrayUtils:S.arrayUtils,stringUtils:S.stringUtils,mediaZoomCalculations:S.mediaZoomCalculations,objectUtils:S.objectUtils,animationFrame:S.animationFrame,scrollAnchors:l,domMeasurements:n,imageUtils:r,storage:S.storage,style:S.style,galleriesCommonLayout:S.galleriesCommonLayout,requestsUtil:S.requestsUtil,boundingLayout:S.boundingLayout,verticalMenuCalculations:S.verticalMenuCalculations,nonPageItemZoom:S.nonPageItemZoom,appPartMediaInnerViewNameUtils:S.appPartMediaInnerViewNameUtils,reactComponentUtils:S.reactComponentUtils,dockUtils:S.dockUtils,viewportUtils:S.viewportUtils,containerBackgroundUtils:S.containerBackgroundUtils,math:S.math,functionUtils:S.functionUtils,mediaConsts:S.mediaConsts,balataConsts:S.mediaConsts.balataConsts,blogAppPartNames:S.blogAppPartNames,wixUserApi:a,languages:i,siteConstants:S.siteConstants,textPatternRecognizer:S.textPatternRecognizer,anchorTagsGenerator:u,errorPages:S.errorPages,logWixCodeConsoleMessage:S.logWixCodeConsoleMessage,logWixCodeConsoleError:S.logWixCodeConsoleError,matrix:{calculations:S.matrix.calculations,scalingCalculations:S.matrix.scalingCalculations},fragment:S.fragment,dynamicPagesUtils:S.dynamicPagesUtils,Screenfull:S.Screenfull,SimpleDrag:S.SimpleDrag,DisplayedJsonDal:c,setMobxDataHandlers:function(t,n){m.setMobxDataHandlers(t,n),y.setMobxDataHandlers(t,e.pick(n,"getObservableByPath"))},pointers:d,constants:p,SiteDataPrivates:f,siteDataUtils:h,sessionFreezer:P,DALFactory:m,routerUtils:v,log:I,wixUrlParser:U,linkRenderer:o,linkUtils:s,componentUtils:D,renderUtils:E}});
//# sourceMappingURL=coreUtils.min.js.map